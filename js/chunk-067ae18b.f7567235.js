(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-067ae18b"],{"2c01":function(e,t,r){"use strict";var a=r("f505"),s=r.n(a);s.a},"2d3b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLoading?r("Spinner"):[r("div",{staticClass:"row"},[r("div",{staticClass:"search-title col-12 row"},[r("router-link",{attrs:{to:"/"}},[e._v("首頁 ")]),r("h6",[e._v(" > ")]),r("h6",{staticStyle:{color:"black"}},[e._v(" 搜尋結果")])],1),r("div",{staticClass:"nav-box col-lg-2"},[r("div",{staticClass:"card-header"},[r("p",[e._v("全站分類")])]),r("ul",{staticClass:"list-group list-group-flush"},[r("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/"}},[e._v("首頁")]),e._l(e.categories,(function(e){return r("NavTabs",{key:e.id,attrs:{"initial-category":e}})}))],2)]),r("div",{staticClass:"search col-lg-10"},[r("p",{staticClass:"ml-3"},[r("i",{staticClass:"far fa-lightbulb mr-2",staticStyle:{color:"#0085a5"}}),e._v("\n          「"+e._s(e.currentKeyword)+"」搜尋到 "+e._s(e.products.length)+" 件商品\n        ")]),e.products<1?r("div",{staticClass:"undefined col-12 mt-5",staticStyle:{"text-align":"center"}},[r("h1",[r("i",{staticClass:"far fa-file-excel",staticStyle:{color:"#0085a5"}})]),r("h5",[e._v("抱歉，找不到您所查詢的「"+e._s(e.currentKeyword)+"」相關商品")]),r("div",{staticClass:"help-block mb-5"},[e._v("建議您，檢查輸入字詞是否有誤或使用其他相關的字詞再搜尋")])]):r("div",{staticClass:"row"},[r("SearchSort",{attrs:{"current-keyword":e.currentKeyword,"current-key":e.currentKey,"current-value":e.currentValue}}),r("transition",{attrs:{name:"fade",mode:"out-in"}},[e.show?r("div",{staticClass:"products-box col-12 row"},e._l(e.products,(function(e){return r("SearchProducts",{key:e.id,attrs:{"initial-product":e}})})),1):e._e()])],1),r("transition",{attrs:{name:"fade",mode:"out-in"}},[e.show?[e.totalPage>1?r("SearchPagination",{attrs:{"current-keyword":e.currentKeyword,"current-key":e.currentKey,"current-value":e.currentValue,"current-page":e.currentPage,"total-page":e.totalPage}}):e._e()]:e._e()],2)],1)]),r("CartNotice")]],2)},s=[],c=(r("96cf"),r("3b8d")),n=r("8bb1"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-sort col-12 mt-2",staticStyle:{display:"flex","justify-content":"center"}},[r("div",{staticClass:"row"},[r("span",{staticClass:"mt-2"},[e._v("排序")]),e.currentKey===e.createdAt&&e.currentValue===e.desc?[r("router-link",{staticClass:"search-select btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.createdAt,value:e.desc}}}},[e._v("新到舊")])]:[r("router-link",{staticClass:"search btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.createdAt,value:e.desc}}}},[e._v("新到舊")])],e.currentKey===e.createdAt&&e.currentValue===e.asc?[r("router-link",{staticClass:"search-select btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.createdAt,value:e.asc}}}},[e._v("舊到新")])]:[r("router-link",{staticClass:"search btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.createdAt,value:e.asc}}}},[e._v("舊到新")])],e.currentKey===e.price&&e.currentValue===e.desc?[r("router-link",{staticClass:"search-select btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.price,value:e.desc}}}},[e._v("價格: 高至低")])]:[r("router-link",{staticClass:"search btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.price,value:e.desc}}}},[e._v("價格: 高至低")])],e.currentKey===e.price&&e.currentValue===e.asc?[r("router-link",{staticClass:"search-select btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.price,value:e.asc}}}},[e._v("價格: 低至高")])]:[r("router-link",{staticClass:"search btn ml-2",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.price,value:e.asc}}}},[e._v("價格: 低至高")])]],2)])},u=[],o={props:{currentKeyword:{type:String,default:""},currentKey:{type:String,default:""},currentValue:{type:String,default:""}},data:function(){return{createdAt:"createdAt",desc:"desc",price:"price",asc:"asc"}}},l=o,d=(r("2c01"),r("2877")),y=Object(d["a"])(l,i,u,!1,null,"1458f9cc",null),p=y.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"products col-6 col-md-4 col-lg-3 mt-3"},[r("router-link",{staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:{name:"product",params:{id:e.product.id}}}},[r("div",{staticClass:"card"},[r("img",{staticClass:"card-img-top",attrs:{src:e.product.image,alt:"Card image cap",width:"80%",height:"180px"}}),r("div",{staticClass:"card-body product-content mt-2"},[r("p",{staticClass:"card-title"},[27===e.product.id?r("span",{staticClass:"badge badge-danger"},[e._v("促銷中")]):e._e(),e._v("\n          【"+e._s(e.product.Product_category.name)+"】\n          "+e._s(e.product.name)+"\n        ")])]),r("div",{staticClass:"card-body row",staticStyle:{display:"flex","justify-content":"space-between"}},[r("p",{staticClass:"price",staticStyle:{color:"#0085a5"}},[e._v("$ "+e._s(e.product.price))]),r("p",{staticClass:"count",staticStyle:{color:"gray"}},[e._v("還剩"+e._s(e.product.count)+"件")])])])])],1)},h=[],g={props:{initialProduct:{type:Object,required:!0}},data:function(){return{product:this.initialProduct}}},k=g,w=(r("6838"),Object(d["a"])(k,v,h,!1,null,"6a91e8b2",null)),f=w.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{attrs:{"aria-label":"Page navigation example"}},[r("ul",{staticClass:"pagination mt-5"},[r("li",{directives:[{name:"show",rawName:"v-show",value:e.previousPage,expression:"previousPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",staticStyle:{color:"#0085a5"},attrs:{"aria-label":"Previous",to:{name:"search",query:{keyword:e.currentKeyword,key:e.currentKey,value:e.currentValue,page:e.previousPage}}}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("«")])])],1),e._l(e.totalPage,(function(t){return r("li",{key:t,staticClass:"page-item",class:["page-item",{active:e.currentPage===t}]},[r("router-link",{staticClass:"page-link",attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.currentKey,value:e.currentValue,page:t}}}},[e._v(e._s(t))])],1)})),r("li",{directives:[{name:"show",rawName:"v-show",value:e.nextPage,expression:"nextPage"}],staticClass:"page-item"},[r("router-link",{staticClass:"page-link",staticStyle:{color:"#0085a5"},attrs:{to:{name:"search",query:{keyword:e.currentKeyword,key:e.currentKey,value:e.currentValue,page:e.nextPage}},"aria-label":"Next"}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("»")])])],1)],2)])},b=[],_=(r("c5f6"),{props:{currentKeyword:{type:String,default:""},currentKey:{type:String,default:""},currentValue:{type:String,default:""},currentPage:{type:Number,default:1},totalPage:{type:Number,default:-1}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1}}}),C=_,P=(r("7e36"),Object(d["a"])(C,m,b,!1,null,"6a8621e5",null)),K=P.exports,S=r("962e"),x=r("2375"),q=r("9970"),V=r("2fa3"),N={components:{NavTabs:n["a"],SearchSort:p,SearchProducts:f,SearchPagination:K,CartNotice:S["a"],Spinner:x["a"]},data:function(){return{categories:[],products:[],currentKeyword:"",currentKey:"",currentValue:"",currentPage:1,totalPage:-1,isLoading:!0,show:!1}},created:function(){var e=this.$route.query,t=e.keyword,r=e.key,a=e.value,s=e.page;this.fetchSearch({keyword:t,key:r,value:a,page:s})},beforeRouteUpdate:function(e,t,r){var a=e.query,s=a.keyword,c=a.key,n=a.value,i=a.page;this.fetchSearch({keyword:s,key:c,value:n,page:i}),r()},methods:{fetchSearch:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,c,n,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.keyword,a=t.key,s=t.value,c=t.page,e.prev=1,this.show=!1,e.next=5,q["a"].getSearch({keyword:r,key:a,value:s,page:c});case 5:if(n=e.sent,i=n.data,u=n.statusText,"OK"===u){e.next=10;break}throw new Error(u);case 10:this.categories=i.categories,this.products=i.products,this.currentKeyword=i.keyword,this.currentKey=i.key,this.currentValue=i.value,this.currentPage=i.page,this.totalPage=i.totalPage.length,this.isLoading=!1,this.show=!0,e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](1),this.isLoading=!1,V["a"].fire({type:"error",title:"無法取得搜尋商品資料，請稍後再試"});case 25:case"end":return e.stop()}}),e,this,[[1,21]])})));function t(t){return e.apply(this,arguments)}return t}()}},j=N,A=(r("b2f8"),Object(d["a"])(j,a,s,!1,null,"ce44413e",null));t["default"]=A.exports},6838:function(e,t,r){"use strict";var a=r("b025"),s=r.n(a);s.a},"742e":function(e,t,r){},"7e36":function(e,t,r){"use strict";var a=r("8216"),s=r.n(a);s.a},8216:function(e,t,r){},b025:function(e,t,r){},b2f8:function(e,t,r){"use strict";var a=r("742e"),s=r.n(a);s.a},f505:function(e,t,r){}}]);
//# sourceMappingURL=chunk-067ae18b.f7567235.js.map