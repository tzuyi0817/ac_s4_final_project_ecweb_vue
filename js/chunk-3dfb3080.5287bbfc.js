(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dfb3080"],{"00c7":function(t,e,r){"use strict";var s=r("54dd"),n=r.n(s);n.a},"0275":function(t,e,r){"use strict";r("7f7f");var s=r("2fa3");e["a"]={getOrder:function(){return s["b"].get("/orderEdit")},postOrder:function(t){var e=t.amount,r=t.UserId,n=t.StoreId,a=t.name,i=t.address,c=t.phone,o=t.shipmentType,d=t.paymentType,l=t.cartId,p=t.couponId;return s["b"].post("/order",{amount:e,UserId:r,StoreId:n,name:a,address:i,phone:c,shipmentType:o,paymentType:d,cartId:l,couponId:p})},getOrderSuccess:function(t){var e=t.orderId;return s["b"].get("/order/".concat(e,"/success"),{orderId:e})},getPayment:function(t){var e=t.orderId;return s["b"].get("/order/".concat(e,"/payment"),{orderId:e})},getBranchSelection:function(t){var e=t.orderId;return s["b"].get("/order/".concat(e,"/branchselection"),{orderId:e})},cancelOrder:function(t){var e=t.orderId;return s["b"].post("/order/".concat(e),{orderId:e})}}},"212b":function(t,e,r){},"2f21":function(t,e,r){"use strict";var s=r("79e5");t.exports=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"4a39":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t.isLoading?r("Spinner"):[r("div",{staticClass:"row"},[r("div",{staticClass:"title col-lg-4"},[r("div",{staticClass:"mb-4"},[r("h3",{staticStyle:{"text-align":"center"}},[t._v("個人資料")])]),r("div",{staticClass:"card mb-5"},[r("img",{staticClass:"round",attrs:{src:t.profile.image,alt:"img"}}),r("h3",{staticClass:"mt-4"},[t._v(t._s(t.profile.name))]),r("p",{staticClass:"email mt-2"},[t._v(t._s(t.profile.email))]),r("p",[t._v(t._s(t.profile.address))]),r("p",[r("span",{staticStyle:{color:"red"}},[t._v(t._s(t.orders.length))]),t._v(" 筆購物紀錄\n          ")]),t.profile.id===t.currentUser.id?r("router-link",{staticClass:"btn btn-success mt-2 col-12",attrs:{to:{name:"EditProfile",params:{id:t.profile.id}}}},[t._v("編輯個人資料")]):t._e()],1)]),r("div",{staticClass:"col-lg-8"},[r("div",{staticClass:"mb-4"},[r("h3",{staticStyle:{"text-align":"center"}},[t._v("購物記錄")])]),t._l(t.orders,(function(t){return r("OrdersDetails",{key:t.id,attrs:{"initial-order":t}})}))],2)])]],2)},n=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("3b8d")),i=r("bd86"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"card mb-4"},[r("div",{staticClass:"card-header",staticStyle:{"text-align":"center","background-color":"#0085a5",color:"white"}},[r("form",[t.order.Order_status.orderStatus!==this.cancel?r("button",{staticClass:"btn btn-danger float-right",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCancelButtonClick(t.order.id)}}},[t._v("取消訂單")]):t._e()]),r("h4",[t._v("訂單資訊 - 編號("+t._s(t.order.id)+")")])]),r("div",{staticClass:"card-body",staticStyle:{"background-color":"#d2f0f5"}},[r("h6",{staticClass:"ml-2"},[t._v("商品詳情：")]),t._m(0),t._l(t.order.items,(function(e){return r("li",{key:e.id,staticClass:"bg-white text-dark list-group-item col-12"},[r("div",{staticClass:"row"},[r("span",{staticClass:"col-6"},[t._v(t._s(e.name))]),r("span",{staticClass:"col-3"},[t._v(t._s(e.Order_item.quantity))]),r("span",{staticClass:"col-3"},[t._v(t._s(e.price))])])])})),r("div",{staticClass:"row"},[r("div",{staticClass:"amount-box col-md-5"},[r("h6",{staticClass:"mt-3 ml-2"},[t._v("金額詳情：")]),r("div",{staticClass:"bg-light text-dark list-group-item mt-3"},[r("span",[t._v("金額總計:")]),r("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.order.amount)+" 元")])])]),r("div",{staticClass:"customer-information col-md-7 mt-3"},[r("h6",{staticClass:"ml-2"},[t._v("收貨人資訊：")]),r("div",{staticClass:"bg-light text-dark list-group-item mt-3"},[r("span",[t._v("名字:  "+t._s(t.order.name))]),r("br"),r("span",[t._v("地址:  "+t._s(t.order.address))]),r("br"),r("span",[t._v("電話:  "+t._s(t.order.phone))])])])]),r("h6",{staticClass:"shipping-status ml-2 mt-3"},[t._v("出貨狀況：")]),r("div",{staticClass:"bg-light text-dark list-group-item mt-3 col-12"},[r("span",[t._v("訂單狀態:  "+t._s(t.order.Order_status.orderStatus))]),r("br"),1===t.lastPayments.PaymentTypeId?r("span",[t._v("付款方式:  信用卡")]):t._e(),2===t.lastPayments.PaymentTypeId?r("span",[t._v("付款方式:  貨到付款")]):t._e(),3===t.lastPayments.PaymentTypeId?r("span",[t._v("付款方式:  GOOGLEPAY")]):t._e(),4===t.lastPayments.PaymentTypeId?r("span",[t._v("付款方式:  匯款")]):t._e(),r("br"),1===t.lastPayments.PaymentStatusId?r("span",[t._v("付款狀況:  未付款")]):t._e(),2===t.lastPayments.PaymentStatusId?r("span",[t._v("付款狀況:  已付款")]):t._e(),3===t.lastPayments.PaymentStatusId?r("span",[t._v("付款狀況:  退款中")]):t._e(),4===t.lastPayments.PaymentStatusId?r("span",[t._v("付款狀況:  已退款")]):t._e(),r("br"),1===t.lastShipments.ShipmentTypeId?r("span",[t._v("出貨方式:  宅配")]):t._e(),2===t.lastShipments.ShipmentTypeId?r("span",[t._v("出貨方式:  超商取貨")]):t._e(),3===t.lastShipments.ShipmentTypeId?r("span",[t._v("出貨方式:  面交")]):t._e(),t.shipmentConvenienceStore.length>0?r("span",[t._v(" -『"+t._s(t.lastShipmentConvenienceStore.branch)+" - "+t._s(t.lastShipmentConvenienceStore.address)+"』")]):t._e(),r("br"),1===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  備貨中")]):t._e(),2===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  發貨中")]):t._e(),3===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  已發貨")]):t._e(),4===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  已到達")]):t._e(),5===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  已取貨")]):t._e(),6===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  已退貨")]):t._e(),7===t.lastShipments.ShipmentStatusId?r("span",[t._v("出貨狀況:  退貨中")]):t._e()])],2)])])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"bg-light text-dark list-group-item mt-3 col-12"},[r("div",{staticClass:"row"},[r("span",{staticClass:"col-6"},[t._v("商品")]),r("span",{staticClass:"col-3"},[t._v("數量")]),r("span",{staticClass:"col-3"},[t._v("小計")])])])}],d=(r("55dd"),r("0275")),l=r("2fa3"),p={inject:["reload"],props:{initialOrder:{type:Object,required:!0}},data:function(){return{order:this.initialOrder,payments:this.initialOrder.Payments,shipments:this.initialOrder.Shipments,shipmentConvenienceStore:this.initialOrder.ShipmentConvenienceStore,cancel:"已取消"}},computed:{lastPayments:function(){var t=this.payments.sort((function(t,e){return t.id-e.id}));return t.slice(-1)[0]},lastShipments:function(){var t=this.shipments.sort((function(t,e){return t.id-e.id}));return t.slice(-1)[0]},lastShipmentConvenienceStore:function(){var t=this.shipmentConvenienceStore.sort((function(t,e){return t.id-e.id}));return t.slice(-1)[0]}},methods:{handleCancelButtonClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].cancelOrder({orderId:e});case 3:if(r=t.sent,s=r.data,n=r.statusText,"OK"===n&&"success"===s.status){t.next=8;break}throw new Error(n);case 8:this.reload(),l["a"].fire({type:"success",title:"成功取消訂單"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),l["a"].fire({type:"error",title:"無法取消訂單，請稍後再試"});case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(e){return t.apply(this,arguments)}return e}()}},u=p,m=(r("00c7"),r("2877")),v=Object(m["a"])(u,c,o,!1,null,"15fe3ab2",null),h=v.exports,f=r("4cce"),_=r("2375"),b=r("2f62");function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(r,!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g={components:{OrdersDetails:h,Spinner:_["a"]},data:function(){return{profile:{},orders:[],isLoading:!1}},computed:S({},Object(b["b"])(["currentUser","isAuthenticated"])),beforeRouteUpdate:function(t,e,r){var s=t.params.id;this.fetchUser({userId:s}),r()},created:function(){var t=this.$route.params.id;this.fetchUser({userId:t})},methods:{fetchUser:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,s,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.userId,t.prev=1,this.isLoading=!0,t.next=5,f["a"].getUserProfile({userId:r});case 5:if(s=t.sent,n=s.data,a=s.statusText,"OK"===a){t.next=10;break}throw new Error(a);case 10:this.profile=n.profile,this.orders=n.orderInfo,this.isLoading=!1,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](1),this.isLoading=!1,l["a"].fire({type:"error",title:"無法取得使用者資料，請稍後再試"});case 19:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(e){return t.apply(this,arguments)}return e}()}},C=g,O=(r("6441"),Object(m["a"])(C,s,n,!1,null,"d2677782",null));e["default"]=O.exports},"54dd":function(t,e,r){},"55dd":function(t,e,r){"use strict";var s=r("5ca1"),n=r("d8e8"),a=r("4bf8"),i=r("79e5"),c=[].sort,o=[1,2,3];s(s.P+s.F*(i((function(){o.sort(void 0)}))||!i((function(){o.sort(null)}))||!r("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(a(this)):c.call(a(this),n(t))}})},6441:function(t,e,r){"use strict";var s=r("212b"),n=r.n(s);n.a}}]);
//# sourceMappingURL=chunk-3dfb3080.5287bbfc.js.map