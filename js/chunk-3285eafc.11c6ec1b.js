(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3285eafc"],{"0275":function(t,e,r){"use strict";r("7f7f");var a=r("2fa3");e["a"]={getOrder:function(){return a["b"].get("/orderEdit")},postOrder:function(t){var e=t.amount,r=t.UserId,s=t.StoreId,i=t.name,c=t.address,n=t.phone,o=t.shipmentType,d=t.paymentType,p=t.cartId,u=t.couponId;return a["b"].post("/order",{amount:e,UserId:r,StoreId:s,name:i,address:c,phone:n,shipmentType:o,paymentType:d,cartId:p,couponId:u})},getOrderSuccess:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/success"),{orderId:e})},getPayment:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/payment"),{orderId:e})},getBranchSelection:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/branchselection"),{orderId:e})},cancelOrder:function(t){var e=t.orderId;return a["b"].post("/order/".concat(e),{orderId:e})}}},"3b54":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mb-5"},[t.isLoading?r("Spinner"):[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header",staticStyle:{"text-align":"center","background-color":"#0085a5",color:"white"}},[r("h3",[t._v("準備為訂單("+t._s(t.order.id)+")選擇門市")])]),r("div",{staticClass:"card-body"},[r("h6",{staticClass:"mt-3 ml-2"},[t._v("商品詳情：")]),r("li",{staticClass:"bg-light text-dark list-group-item mt-3 col-12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[t._v("商品")]),r("div",{staticClass:"col-3"},[t._v("數量")]),r("div",{staticClass:"col-3"},[t._v("小計")])])]),t._l(t.items,(function(e){return r("li",{key:e.id,staticClass:"bg-white text-dark list-group-item col-12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[t._v(t._s(e.name))]),r("div",{staticClass:"col-3 quantity"},[t._v(t._s(e.Order_item.quantity))]),r("div",{staticClass:"col-3"},[t._v(t._s(e.price))])])])})),r("div",{staticClass:"row"},[r("div",{staticClass:"payment-value-box col-md-6"},[r("h6",{staticClass:"mt-5 ml-2"},[t._v("付款金額：")]),r("div",{staticClass:"bg-light text-dark list-group-item mt-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[t._v("金額總計:")]),r("div",{staticClass:"amount",staticStyle:{color:"red"}},[t._v(t._s(t.order.amount)+" 元")])])])])])],2)]),r("form",{attrs:{name:"Spgateway",action:t.pickupInfo.PayGateWay,method:"POST"}},[r("input",{staticClass:"pickup",attrs:{type:"hidden",name:"MerchantID"},domProps:{value:t.pickupInfo.MerchantID}}),r("input",{staticClass:"pickup",attrs:{type:"hidden",name:"MerchantTradeNo"},domProps:{value:t.pickupInfo.MerchantTradeNo}}),r("input",{staticClass:"pickup",attrs:{type:"hidden",name:"LogisticsType"},domProps:{value:t.pickupInfo.LogisticsType}}),r("input",{staticClass:"pickup",attrs:{type:"hidden",name:"LogisticsSubType"},domProps:{value:t.pickupInfo.LogisticsSubType}}),r("input",{staticClass:"pickup",attrs:{type:"hidden",name:"IsCollection",value:"pickupInfo.IsCollection"}}),r("input",{staticClass:"pickup",attrs:{type:"hidden",name:"ServerReplyURL"},domProps:{value:t.pickupInfo.ServerReplyURL}}),r("button",{staticClass:"btn btn-success col-12 mt-4",attrs:{type:"submit"}},[t._v("前往選擇門市")])])]],2)},s=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("3b8d")),c=r("bd86"),n=r("0275"),o=r("2375"),d=r("2fa3"),p=r("2f62");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={components:{Spinner:o["a"]},data:function(){return{order:{},items:[],pickupInfo:{MerchantID:"",MerchantTradeNo:"",LogisticsType:"",LogisticsSubType:"",IsCollection:"",ServerReplyURL:"",PayGateWay:""},isLoading:!1}},computed:l({},Object(p["b"])(["currentUser","isAuthenticated"])),beforeRouteUpdate:function(t,e,r){var a=t.params.id;this.fetchOrder({orderId:a}),r()},created:function(){var t=this.$route.params.id;this.fetchOrder({orderId:t})},methods:{fetchOrder:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.orderId,t.prev=1,this.isLoading=!0,t.next=5,n["a"].getBranchSelection({orderId:r});case 5:if(a=t.sent,s=a.data,i=a.statusText,"OK"===i){t.next=10;break}throw new Error(i);case 10:this.order=s.order,this.items=s.order.items,this.pickupInfo={MerchantID:s.pickupInfo.MerchantID,MerchantTradeNo:s.pickupInfo.MerchantTradeNo,LogisticsType:s.pickupInfo.LogisticsType,LogisticsSubType:s.pickupInfo.LogisticsSubType,IsCollection:s.pickupInfo.IsCollection,ServerReplyURL:s.pickupInfo.ServerReplyURL,PayGateWay:s.pickupInfo.PayGateWay},this.isLoading=!1,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](1),this.isLoading=!1,d["a"].fire({type:"error",title:"無法取得訂單資料，請稍後再試"});case 20:case"end":return t.stop()}}),t,this,[[1,16]])})));function e(e){return t.apply(this,arguments)}return e}()}},v=f,h=(r("a434"),r("2877")),y=Object(h["a"])(v,a,s,!1,null,"6cccd571",null);e["default"]=y.exports},a434:function(t,e,r){"use strict";var a=r("d523"),s=r.n(a);s.a},d523:function(t,e,r){}}]);
//# sourceMappingURL=chunk-3285eafc.11c6ec1b.js.map