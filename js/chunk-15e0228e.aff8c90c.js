(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15e0228e"],{"0955":function(t,e,a){},"0c97":function(t,e,a){},"0e47":function(t,e,a){"use strict";var r=a("0fe1"),i=a.n(r);i.a},"0fe1":function(t,e,a){},"14b9":function(t,e,a){var r=a("5ca1");r(r.P,"String",{repeat:a("9744")})},2708:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return c}));a("14b9");var r=a("c1df"),i=a.n(r),s={filters:{star:function(t){var e=Math.floor(t),a=Math.floor(5-t),r=(t-e).toFixed(1),i=function(t,e,a){var r=[{color:"yellow",num:t},{color:null,num:e},{color:"gray",num:a}],i=r.map((function(t){var e=t.color,a=t.num,r=100*a;return!e&&a>0?'<span class="star star-percentage">\n            <i class="fa fa-star fa-star-gray"></i>\n            <i class="fa fa-star fa-star-yellow percent-star" style="width: '.concat(r,'%;"></i>\n          </span>'):'<i class="fa fa-star fa-star-'.concat(e,'"></i>').repeat(a)})).join("");return i};return i(e,r,a)}}},n={filters:{fromNow:function(t){return t?i()(t).format("YYYY-MM-DD HH:mm"):"-"}}},c={filters:{date:function(t){return t?i()(t).format("YYYY-MM-DD"):"-"}}}},"588a":function(t,e,a){"use strict";var r=a("5e78"),i=a.n(r);i.a},"5e78":function(t,e,a){},"5ec1":function(t,e,a){"use strict";var r=a("95d6"),i=a.n(r);i.a},"7fdd":function(t,e,a){},8879:function(t,e,a){},"95d6":function(t,e,a){},9744:function(t,e,a){"use strict";var r=a("4588"),i=a("be13");t.exports=function(t){var e=String(i(this)),a="",s=r(t);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(a+=e);return a}},b8da:function(t,e,a){},bbe9:function(t,e,a){"use strict";var r=a("0c97"),i=a.n(r);i.a},cc17:function(t,e,a){"use strict";a("6b54");var r=a("2fa3");e["a"]={postCart:function(t){var e=t.productId,a=t.quantity;return r["b"].post("/cart",{productId:e,quantity:a})},getCart:function(t){var e=t.couponId;if(e){var a=new URLSearchParams({couponId:e});return r["b"].get("/cart?".concat(a.toString()))}return r["b"].get("/cart")},addCartItem:function(t){var e=t.cartItemId;return r["b"].post("/cartItem/".concat(e,"/add"),{cartItemId:e})},subCartItem:function(t){var e=t.cartItemId;return r["b"].post("/cartItem/".concat(e,"/sub"),{cartItemId:e})},deleteCartItem:function(t){var e=t.cartItemId;return r["b"].delete("/cartItem/".concat(e),{cartItemId:e})}}},d2f1:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product"},[t.isLoading?a("Spinner"):[a("div",{staticClass:"product-title col-12 row"},[a("router-link",{attrs:{to:"/"}},[t._v("首頁 ")]),a("h6",[t._v(" > ")]),a("router-link",{attrs:{to:{name:"category-products",params:{id:t.categoryId}}}},[t._v(" "+t._s(t.categoryName)+" ")]),a("h6",[t._v(" > ")]),a("h6",{staticStyle:{color:"black"}},[t._v(" "+t._s(t.product.name))])],1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?a("div",{staticClass:"index-box row mt-3 col-12"},[a("div",{staticClass:"select-img-box col-lg-1 col-2"},[a("img",{staticClass:"select-img",attrs:{src:t.product.image,alt:"image"},on:{mouseover:function(e){return t.changeImg(t.product.image)}}}),a("img",{staticClass:"select-img",attrs:{src:t.product.imageI,alt:"image"},on:{mouseover:function(e){return t.changeImg(t.product.imageI)}}}),a("img",{staticClass:"select-img",attrs:{src:t.product.imageII,alt:"image"},on:{mouseover:function(e){return t.changeImg(t.product.imageII)}}})]),a("div",{staticClass:"index col-lg-5 col-10 mb-5"},[a("img",{attrs:{src:""===t.productImg?t.productImg=t.product.image:t.productImg,width:"100%",height:"400vh",alt:"image"}})]),a("ProductInformation",{key:t.product.id,attrs:{"initial-product":t.product,Comments:t.Comments,ratingAve:t.ratingAve}})],1):t._e()]),a("div",{staticClass:"similar-products-title mt-5"},[a("h5",[t._v("推薦相似商品")])]),a("div",{staticClass:"similar-products-box mt-5 mb-5 col-12"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?a("div",{staticClass:"similar-products"},t._l(t.similarProducts,(function(e){return a("SimilarProducts",{key:e.id,attrs:{"initial-similar-product":e,"category-name":t.categoryName}})})),1):t._e()])],1),a("ProductDetails",{key:t.product.id,attrs:{"initial-product":t.product}}),a("section",{attrs:{id:"evaluation"}}),a("div",{staticClass:"comment-title mt-5"},[a("h5",[t._v("商品評價")])]),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?a("div",{staticClass:"comment-content mt-5"},[a("div",{staticClass:"card-header col-12 mt-3"},[a("div",{staticClass:"comment row"},[0===t.Comments.length?a("p",{staticClass:"ml-1 mt-4 mr-4",staticStyle:{color:"orange"}},[t._v("0 / 5")]):a("p",{staticClass:"ml-1 mt-4 mr-4",staticStyle:{color:"orange"}},[t._v(t._s(t.ratingAve)+" / 5")]),a("p",{staticClass:"commit-title mt-4 ml-1"},[a("span",{staticStyle:{color:"rgb(185, 179, 179)"}},[t._v("|")]),t._v("\n                共有 \n              "),a("span",{staticClass:"commit-total-number"},[t._v(t._s(t.Comments.length))]),t._v("  則評價\n            ")])]),a("div",{staticClass:"ml-3 mb-4"},[a("span",{staticClass:"stars d-flex align-items-center ml-1"},[a("span",{staticClass:"star",domProps:{innerHTML:t._f("star")(t.ratingAve)}})])])]),a("ProductReview",{attrs:{"comments-pagination":t.commentsPagination},on:{"after-delete-comment":t.afterDeleteComment}})],1):t._e()]),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?[t.totalPage>1?a("commentPagination",{attrs:{"current-page":t.currentPage,"total-page":t.totalPage}}):t._e()]:t._e()],2),t.commentsPagination.length<1?a("div",{staticClass:"no-comments mt-5",staticStyle:{"text-align":"center"}},[t._v("此商品暫時無評價")]):t._e(),t.isAuthenticated?a("CreateComment",{attrs:{"product-id":t.product.id},on:{"after-create-comment":t.afterCreateComment}}):t._e(),a("CartNotice")]],2)},i=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("96cf"),a("3b8d")),n=a("bd86"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productInformation col-lg-6"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("h5",{staticClass:"card-title",staticStyle:{"text-align":"center"}},[t._v("\n        【\n        "),a("router-link",{staticClass:"categoryName",staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:{name:"category-products",params:{id:t.product.ProductCategoryId}}}},[t._v(t._s(t.product.Product_category.name))]),t._v("\n        】"+t._s(t.product.name)+"\n        "),27===t.product.id?a("span",{staticClass:"badge badge-danger"},[t._v("促銷中")]):t._e()],1)]),a("div",{staticClass:"rating-box row"},[0===t.Comments.length?a("div",{staticClass:"no-comment mb-2",staticStyle:{color:"red"}},[t._v("此商品尚未有人評價")]):a("div",{staticClass:"av-star row"},[a("span",{staticClass:"stars d-flex align-items-center"},[a("p",{staticClass:"mt-3",staticStyle:{color:"orange"}},[t._v(t._s(t.rating))]),t._v(" \n          "),a("span",{staticClass:"star",domProps:{innerHTML:t._f("star")(t.rating)}})])]),a("p",{staticStyle:{color:"rgb(185, 179, 179)"}},[t._v("|  ")]),a("router-link",{staticClass:"rating",staticStyle:{"text-decoration":"none"},attrs:{to:"#evaluation"}},[t._v("\n        "+t._s(t.Comments.length)+"\n        評價\n      ")]),a("iframe",{staticClass:"facebook",staticStyle:{border:"none",overflow:"hidden"},attrs:{src:t.facebook,width:"69",height:"28",scrolling:"no",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}})],1),a("div",{staticClass:"price-box row"},[a("h5",[t._v("新台幣")]),a("h3",{staticClass:"price",staticStyle:{color:"#0085a5"}},[t._v(t._s(t.product.price))]),a("h5",[t._v("元")])]),a("hr"),a("h6",{staticClass:"transport"},[t._v("運送費用")]),t._m(0),t._m(1),a("hr"),a("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCart(e)}}},[a("div",{staticClass:"qty-box"},[a("h6",{staticClass:"qty-title"},[t._v("數量")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.qty,expression:"qty",modifiers:{number:!0}}],staticClass:"qty",attrs:{type:"number",name:"quantity",min:"1",max:t.product.count},domProps:{value:t.qty},on:{input:[function(e){e.target.composing||(t.qty=t._n(e.target.value))},t.qtyValue],blur:function(e){return t.$forceUpdate()}}}),a("p",{staticClass:"count mt-2"},[t._v("\n          還剩 "+t._s(t.product.count)+" 件\n          "),0===t.product.count?a("span",{staticStyle:{color:"#ff5722"}},[t._v("『商品補貨中』")]):t._e()])]),a("div",{staticClass:"cartBtn"},[0===t.product.count?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"notice col-12",attrs:{variant:"primary"}},[a("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}}),t._v("  貨到通知\n        ")]):t._e(),t.product.count>0?a("input",{attrs:{type:"hidden",name:"productId"},domProps:{value:t.product.id}}):t._e(),t.product.count>0?a("button",{staticClass:"btn btn-success col-12",attrs:{type:"submit",disabled:t.isProcessing}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v("  加入購物車\n        ")]):t._e()],1)]),a("b-modal",{attrs:{id:"modal-1",title:"到貨通知","hide-footer":""}},[a("div",{staticClass:"modalTitle"},[t._v("\n        商品名稱：\n        "),a("p",{staticStyle:{color:"red"}},[t._v("【"+t._s(t.product.Product_category.name)+"】"+t._s(t.product.name))])]),a("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleNotice(e)}}},[a("div",{staticClass:"email form-group"},[a("label",{staticStyle:{color:"gray"},attrs:{for:"inputEmail"}},[t._v("電子郵件：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form col-12",attrs:{type:"text",name:"email",required:"",autofocus:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"email_confirm form-group"},[a("label",{staticStyle:{color:"gray"},attrs:{for:"inputEmail"}},[t._v("確認電子郵件：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email_confirm,expression:"email_confirm"}],staticClass:"form col-12",attrs:{type:"text",name:"email_confirm",required:""},domProps:{value:t.email_confirm},on:{input:function(e){e.target.composing||(t.email_confirm=e.target.value)}}})]),a("p",{staticClass:"warning",staticStyle:{"text-align":"center",color:"red"}},[t._v("此功能僅為貨到通知，無法保留商品喔。")]),a("div",{staticClass:"mb-4",staticStyle:{"text-align":"center"}},[a("button",{staticClass:"modal-btn btn btn-primary col-12",attrs:{disabled:t.isProcessing}},[t._v(t._s(t.isProcessing?"處理中...":"送出"))])])])])],1)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"freight-box row"},[a("p",{staticClass:"freight ml-1"},[a("i",{staticClass:"fa fa-truck mr-1",staticStyle:{color:"#0085a5"},attrs:{"aria-hidden":"true"}}),t._v(" 運費\n      ")]),a("p",{staticClass:"ml-3",staticStyle:{color:"#0085a5"}},[t._v("$ 60")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"free-box row"},[a("img",{staticClass:"mr-1",attrs:{src:"https://cdngarenanow-a.akamaihd.net/shopee/shopee-pcmall-live-sg/assets/9d21899f3344277e34d40bfc08f60bc7.png",width:"35",height:"20"}}),a("p",{staticClass:"free-content"},[t._v("\n        滿$999，\n        "),a("span",{staticClass:"free",staticStyle:{color:"#ff5722"}},[t._v("免運費")])])])}],l=(a("c5f6"),a("2708")),u=a("2fa3"),m={postDeliveryNotice:function(t){var e=t.ProductId,a=t.email,r=t.email_confirm;return u["b"].post("/product/".concat(e,"/deliveryNotice"),{ProductId:e,email:a,email_confirm:r})}},d=a("cc17"),p={mixins:[l["c"]],inject:["reload"],props:{initialProduct:{type:Object,required:!0},Comments:{type:Array,required:!0},ratingAve:{type:Number}},data:function(){return{product:this.initialProduct,rating:this.ratingAve,facebook:"https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Ftzuyi0817.github.io%2Fac_s4_final_project_ecweb_vue%2F%23%2Fproduct%2F".concat(this.initialProduct.id,"&layout=button&size=large&width=69&height=28&appId"),isDisable:!0,qty:1,minus:!1,plus:!1,isProcessing:!1,email:"",email_confirm:""}},methods:{qtyValue:function(){return this.qty>=this.product.count?this.qty=this.product.count:this.qty<0?this.qty=1:void 0},handleNotice:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.email===this.email_confirm){t.next=4;break}return u["a"].fire({type:"warning",title:"請確認輸入的電子郵件是否相同"}),t.abrupt("return");case 4:return this.isProcessing=!0,t.next=7,m.postDeliveryNotice({ProductId:this.initialProduct.id,email:this.email,email_confirm:this.email_confirm});case 7:if(e=t.sent,a=e.data,r=e.statusText,"OK"===r&&"success"===a.status){t.next=12;break}throw new Error(r);case 12:this.isProcessing=!1,this.email="",this.email_confirm="",this.reload(),u["a"].fire({type:"success",title:"已送出申請，待補充庫存後，相關人員會寄e-mail通知您"}),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](0),this.isProcessing=!1,u["a"].fire({type:"error",title:"無法申請貨到通知，請稍後再試"});case 23:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(){return t.apply(this,arguments)}return e}(),handleCart:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isProcessing=!0,t.next=4,d["a"].postCart({productId:this.initialProduct.id,quantity:this.qty});case 4:if(e=t.sent,a=e.data,r=e.statusText,"OK"===r&&"success"===a.status){t.next=9;break}throw new Error(r);case 9:i=Number(localStorage.getItem("cartItemNumber")),i>0?(i+=this.qty,localStorage.setItem("cartItemNumber",i)):localStorage.setItem("cartItemNumber",this.qty),this.$store.commit("setCartItemNumber"),this.isProcessing=!1,this.qty=1,u["a"].fire({type:"success",title:"商品已加入購物車"}),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](0),this.isProcessing=!1,u["a"].fire({type:"error",title:"商品無法加入購物車，請稍後再試"});case 21:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}()}},g=p,f=(a("5ec1"),a("f4cc"),a("2877")),v=Object(f["a"])(g,c,o,!1,null,"31654ffb",null),h=v.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[t._m(0),a("div",{staticClass:"details-content col-12 mb-5"},[a("p",[t._v(t._s(t.product.description))])])])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("span",{staticClass:"detail-title"},[t._v("商品簡介")])])}],_={props:{initialProduct:{type:Object,required:!0}},data:function(){return{product:this.initialProduct}}},C=_,P=(a("bbe9"),Object(f["a"])(C,b,y,!1,null,"28b35ec0",null)),w=P.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comments col-12"},t._l(t.commentsPagination,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"list-group-item list-group-item-action mt-2"},[e.User.id===t.currentUser.id?a("button",{staticClass:"btn btn-danger float-right",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.handleDeleteButtonClick(e.id)}}},[t._v("x")]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2 ml-2"},[a("img",{staticClass:"avatar",attrs:{src:e.User.image}})]),a("div",{staticClass:"col-10"},[a("p",{staticClass:"commit-user mr-5 mt-2"},[t._v(t._s(e.User.name))]),a("div",[a("span",{staticClass:"stars d-flex mb-3 mt-2 ml-5"},[a("span",{staticClass:"star",domProps:{innerHTML:t._f("star")(e.rating)}})])])])]),a("p",{staticClass:"commit mt-4"},[t._v(t._s(e.comment))]),a("small",{staticClass:"commit-date"},[t._v(t._s(t._f("fromNow")(e.createdAt)))])])])})),0)},I=[],k={deleteComment:function(t){var e=t.ProductId,a=t.commentId;return u["b"].delete("/product/".concat(e,"/rate/").concat(a))},createComment:function(t){var e=t.ProductId,a=t.comment,r=t.rating;return u["b"].post("/product/".concat(e,"/rate"),{ProductId:e,comment:a,rating:r})}},O=a("2f62");function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var q={mixins:[l["c"],l["b"]],inject:["reload"],props:{commentsPagination:{type:Array,required:!0}},computed:j({},Object(O["b"])(["currentUser"])),methods:{handleDeleteButtonClick:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.deleteComment({ProductId:this.ProductId,commentId:e});case 3:if(a=t.sent,r=a.data,i=a.statusText,"OK"===i&&"success"===r.status){t.next=8;break}throw new Error(i);case 8:this.reload(),this.$emit("after-delete-comment",e),u["a"].fire({type:"success",title:"成功刪除評論"}),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),u["a"].fire({type:"error",title:"無法刪除評論，請稍後再試"});case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()}},N=q,E=(a("e040"),Object(f["a"])(N,x,I,!1,null,"67a28a3a",null)),D=E.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination mt-5"},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[a("router-link",{staticClass:"page-link",staticStyle:{color:"#0085a5"},attrs:{"aria-label":"Previous",to:{name:"product",query:{page:t.previousPage},hash:"#evaluation"}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return a("li",{key:e,staticClass:"page-item",class:["page-item",{active:t.currentPage===e}]},[a("router-link",{staticClass:"page-link",attrs:{to:{name:"product",query:{page:e},hash:"#evaluation"}}},[t._v(t._s(e))])],1)})),a("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[a("router-link",{staticClass:"page-link",staticStyle:{color:"#0085a5"},attrs:{to:{name:"product",query:{page:t.nextPage},hash:"#evaluation"},"aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])},A=[],R={props:{currentPage:{type:Number,default:1},totalPage:{type:Number,default:-1}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1}}},T=R,L=(a("0e47"),Object(f["a"])(T,$,A,!1,null,"511352d8",null)),M=L.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-comment"},[t._m(0),a("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[a("div",{staticClass:"form-group col-12 mt-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"comment",name:"comment",rows:"5",placeholder:"請在此輸入內容",required:""},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),a("p",{staticClass:"mb-3 d-flex align-items-center"},[a("span",{staticClass:"text-secondary ml-3"},[t._v("商品評分：")]),a("span",{staticClass:"starrating risingstar d-flex justify-content-center flex-row-reverse"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rating,expression:"rating"}],attrs:{type:"radio",id:"star5",name:"rating",value:"5"},domProps:{checked:t._q(t.rating,"5")},on:{change:function(e){t.rating="5"}}}),t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rating,expression:"rating"}],attrs:{type:"radio",id:"star4",name:"rating",value:"4"},domProps:{checked:t._q(t.rating,"4")},on:{change:function(e){t.rating="4"}}}),t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rating,expression:"rating"}],attrs:{type:"radio",id:"star3",name:"rating",value:"3"},domProps:{checked:t._q(t.rating,"3")},on:{change:function(e){t.rating="3"}}}),t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rating,expression:"rating"}],attrs:{type:"radio",id:"star2",name:"rating",value:"2"},domProps:{checked:t._q(t.rating,"2")},on:{change:function(e){t.rating="2"}}}),t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rating,expression:"rating"}],attrs:{type:"radio",id:"star1",name:"rating",value:"1"},domProps:{checked:t._q(t.rating,"1")},on:{change:function(e){t.rating="1"}}}),t._m(5)])]),a("div",{staticClass:"col-12 mt-4"},[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("button",{staticClass:"btn btn-success col-12",attrs:{type:"submit",disabled:t.isProcessing}},[t._v("送出評價")])])])])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h5",{staticClass:"create-comment-title"},[t._v("留下您的評價：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"star5",title:"5分"}},[a("span",{staticClass:"fa fa-star"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"star4",title:"4分"}},[a("span",{staticClass:"fa fa-star"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"star3",title:"3分"}},[a("span",{staticClass:"fa fa-star"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"star2",title:"2分"}},[a("span",{staticClass:"fa fa-star"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"star1",title:"1分"}},[a("span",{staticClass:"fa fa-star"})])}],Y={inject:["reload"],props:{productId:{type:Number,required:!0}},data:function(){return{comment:"",rating:-1,isProcessing:!1}},methods:{handleSubmit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.comment&&-1!==!this.rating){t.next=4;break}return u["a"].fire({type:"warning",title:"您尚未填寫任何評論或評價"}),t.abrupt("return");case 4:return this.isProcessing=!0,t.next=7,k.createComment({ProductId:this.productId,comment:this.comment,rating:this.rating});case 7:if(e=t.sent,a=e.data,r=e.statusText,"OK"===r&&"success"===a.status){t.next=12;break}throw new Error(r);case 12:this.reload(),this.$emit("after-create-comment",{commentId:a.commentId,ProductId:this.productId,comment:this.comment,rating:this.rating}),this.isProcessing=!1,this.comment="",this.rating=-1,u["a"].fire({type:"success",title:"成功新增評論"}),t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](0),this.isProcessing=!1,u["a"].fire({type:"error",title:"無法新增評論，請稍後再試"});case 24:case"end":return t.stop()}}),t,this,[[0,20]])})));function e(){return t.apply(this,arguments)}return e}()}},H=Y,K=(a("fa7c"),Object(f["a"])(H,U,F,!1,null,"18aac66e",null)),B=K.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"similar-products col-3"},[a("router-link",{staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:{name:"product",params:{id:t.product.id}}}},[a("div",{staticClass:"card"},[a("img",{staticClass:"card-img-top",attrs:{src:t.product.image,alt:"Card image cap",width:"286px",height:"180px"}}),a("div",{staticClass:"card-body product-content mt-2"},[a("p",{staticClass:"card-title"},[t._v("\n          【"+t._s(t.CategoryName)+"】\n          "+t._s(t.product.name)+"\n        ")])]),a("div",{staticClass:"card-body row",staticStyle:{display:"flex"}},[a("p",{staticClass:"price",staticStyle:{color:"#0085a5"}},[t._v("$ "+t._s(t.product.price))]),a("p",{staticClass:"count",staticStyle:{color:"gray"}},[t._v("還剩"+t._s(t.product.count)+"件")])])])])],1)},J=[],V={props:{initialSimilarProduct:{type:Object,required:!0},categoryName:{type:String,default:""}},data:function(){return{product:this.initialSimilarProduct,CategoryName:this.categoryName}}},G=V,Q=(a("ed1e"),Object(f["a"])(G,z,J,!1,null,"07826584",null)),W=Q.exports,X=a("962e"),Z=a("2375"),tt=a("9970");function et(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function at(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?et(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):et(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var rt={mixins:[l["c"]],components:{ProductInformation:h,ProductDetails:w,ProductReview:D,CommentPagination:M,CreateComment:B,SimilarProducts:W,CartNotice:X["a"],Spinner:Z["a"]},data:function(){return{categories:[],categoryId:-1,Comments:[],commentsPagination:[],ratingAve:-1,currentPage:1,totalPage:-1,similarProducts:[],categoryName:"",product:{id:-1,ProductCategoryId:-1,name:"",image:"",imageI:"",imageII:"",price:-1,count:-1,description:"",Product_category:{name:""}},isLoading:!0,show:!1,productImg:""}},computed:at({},Object(O["b"])(["currentUser","isAuthenticated"])),beforeRouteUpdate:function(t,e,a){var r=t.params.id,i=t.query.page;this.fetchProduct({productId:r,page:i}),a()},created:function(){var t=this.$route.params.id,e=this.$route.query.page;this.fetchProduct({productId:t,page:e})},methods:{fetchProduct:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,r,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.productId,r=e.page,t.prev=1,this.show=!1,t.next=5,tt["a"].getProduct({productId:a,page:r});case 5:if(i=t.sent,s=i.data,n=i.statusText,"OK"===n){t.next=10;break}throw new Error(n);case 10:this.categories=s.categories,this.categoryId=s.categoryId,this.Comments=s.product.Comments,this.commentsPagination=s.comment,this.ratingAve=s.ratingAve,this.currentPage=s.page,this.totalPage=s.totalPage.length,this.similarProducts=s.productsFilter,this.categoryName=s.product.Product_category.name,this.product={id:s.product.id,ProductCategoryId:s.product.ProductCategoryId,name:s.product.name,image:s.product.image,price:s.product.price,count:s.product.count,description:s.product.description,imageI:s.product.imageI,imageII:s.product.imageII},this.product.Product_category={name:s.product.Product_category.name},this.isLoading=!1,this.changeImg(s.product.image),this.show=!0,t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](1),this.isLoading=!1,u["a"].fire({type:"error",title:"無法取得商品資料，請稍後再試"});case 30:case"end":return t.stop()}}),t,this,[[1,26]])})));function e(e){return t.apply(this,arguments)}return e}(),changeImg:function(t){this.productImg=t},afterDeleteComment:function(){!1===this.isLoading&&setTimeout((function(){window.scrollTo({top:1500,behavior:"auto"})}),2e3)},afterCreateComment:function(){!1===this.isLoading&&setTimeout((function(){window.scrollTo({top:1500,behavior:"auto"})}),2e3)}}},it=rt,st=(a("588a"),Object(f["a"])(it,r,i,!1,null,"36a4d142",null));e["default"]=st.exports},e040:function(t,e,a){"use strict";var r=a("7fdd"),i=a.n(r);i.a},ed1e:function(t,e,a){"use strict";var r=a("8879"),i=a.n(r);i.a},f4cc:function(t,e,a){"use strict";var r=a("0955"),i=a.n(r);i.a},fa7c:function(t,e,a){"use strict";var r=a("b8da"),i=a.n(r);i.a}}]);
//# sourceMappingURL=chunk-15e0228e.aff8c90c.js.map