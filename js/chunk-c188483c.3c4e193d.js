(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c188483c"],{"06c8":function(t,e,a){"use strict";var r=a("81b2"),s=a.n(r);s.a},"1e1e":function(t,e,a){"use strict";var r=a("8cd4"),s=a.n(r);s.a},"531a":function(t,e,a){},7460:function(t,e,a){"use strict";var r=a("96b4"),s=a.n(r);s.a},"81b2":function(t,e,a){},"8cd4":function(t,e,a){},"96b4":function(t,e,a){},d8bf:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-5"},[t.isLoading?a("Spinner"):[a("div",{staticClass:"index col-12"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?a("img",{attrs:{src:t.category.image,alt:"image"}}):t._e()])],1),a("div",{staticClass:"index-title col-12 row"},[a("router-link",{attrs:{to:"/"}},[t._v("首頁 ")]),a("h6",[t._v(" > ")]),a("router-link",{staticClass:"index-title-name",attrs:{to:{name:"category-products",params:{id:t.category.id}}}},[t._v(" "+t._s(t.category.name))])],1),a("section",{attrs:{id:"pagination"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"card col-lg-2"},[a("div",{staticClass:"card-header"},[a("p",[t._v("全站分類")])]),a("ul",{staticClass:"list-group list-group-flush"},[a("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/"}},[t._v("首頁")]),t._l(t.categories,(function(e){return a("NavTabs",{key:e.id,attrs:{"initial-category":e,"category-id":t.categoryId}})}))],2)]),a("div",{staticClass:"sort-box col-lg-10"},[a("div",{staticClass:"title col-12"},[a("h4",{staticStyle:{color:"#0085a5"}},[t._v(t._s(t.category.name))])]),a("div",{staticClass:"sort col-12"},[a("Sort",{attrs:{"current-key":t.currentKey,"current-value":t.currentValue}})],1),a("div",{staticClass:"all-products-box row col-12"},[a("div",{staticClass:"all-products col-12"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?a("div",{staticClass:"row"},t._l(t.products,(function(e){return a("Products",{key:e.id,attrs:{"initial-product":e,category:t.category}})})),1):t._e()])],1)]),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show?[t.totalPage>1?a("ProductsPagination",{attrs:{"current-key":t.currentKey,"current-value":t.currentValue,"current-page":t.currentPage,"total-page":t.totalPage}}):t._e()]:t._e()],2)],1)]),t.products.length<1?a("div",{staticClass:"no-products mt-5",staticStyle:{"text-align":"center"}},[t._v("此類別暫時無商品資料")]):t._e(),a("CartNotice")]],2)},s=[],c=(a("7f7f"),a("96cf"),a("3b8d")),i=a("8bb1"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-sort col-12 mt-2",staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"mt-2 ml-1"},[t._v("排序")]),t.currentKey===t.createdAt&&t.currentValue===t.desc?[a("router-link",{staticClass:"search-select btn",attrs:{to:{name:"category-products",query:{key:t.createdAt,value:t.desc},hash:"#pagination"}}},[t._v("新到舊")])]:[a("router-link",{staticClass:"search btn",attrs:{to:{name:"category-products",query:{key:t.createdAt,value:t.desc},hash:"#pagination"}}},[t._v("新到舊")])],t.currentKey===t.createdAt&&t.currentValue===t.asc?[a("router-link",{staticClass:"search-select btn",attrs:{to:{name:"category-products",query:{key:t.createdAt,value:t.asc},hash:"#pagination"}}},[t._v("舊到新")])]:[a("router-link",{staticClass:"search btn",attrs:{to:{name:"category-products",query:{key:t.createdAt,value:t.asc},hash:"#pagination"}}},[t._v("舊到新")])],t.currentKey===t.price&&t.currentValue===t.desc?[a("router-link",{staticClass:"search-select btn",attrs:{to:{name:"category-products",query:{key:t.price,value:t.desc},hash:"#pagination"}}},[t._v("價格: 高至低")])]:[a("router-link",{staticClass:"search btn",attrs:{to:{name:"category-products",query:{key:t.price,value:t.desc},hash:"#pagination"}}},[t._v("價格: 高至低")])],t.currentKey===t.price&&t.currentValue===t.asc?[a("router-link",{staticClass:"search-select btn",attrs:{to:{name:"category-products",query:{key:t.price,value:t.asc},hash:"#pagination"}}},[t._v("價格: 低至高")])]:[a("router-link",{staticClass:"search btn",attrs:{to:{name:"category-products",query:{key:t.price,value:t.asc},hash:"#pagination"}}},[t._v("價格: 低至高")])]],2)])},o=[],u={props:{currentKey:{type:String,default:""},currentValue:{type:String,default:""}},data:function(){return{createdAt:"createdAt",desc:"desc",price:"price",asc:"asc"}}},l=u,d=(a("ee54"),a("2877")),g=Object(d["a"])(l,n,o,!1,null,"067be684",null),p=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products col-6 col-md-4 col-lg-3 mt-2"},[a("router-link",{staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:{name:"product",params:{id:t.product.id}}}},[a("div",{staticClass:"card"},[a("img",{staticClass:"card-img-top",attrs:{src:t.product.image,alt:"Card image cap",width:"80%",height:"180px"}}),a("div",{staticClass:"card-body product-content mt-2"},[a("p",{staticClass:"card-title"},[27===t.product.id?a("span",{staticClass:"badge badge-danger"},[t._v("促銷中")]):t._e(),t._v("\n          【"+t._s(t.Category.name)+"】\n          "+t._s(t.product.name)+"\n        ")])]),a("div",{staticClass:"card-body row",staticStyle:{display:"flex","justify-content":"space-between"}},[a("p",{staticClass:"price",staticStyle:{color:"#0085a5"}},[t._v("$ "+t._s(t.product.price))]),a("p",{staticClass:"count",staticStyle:{color:"gray"}},[t._v("還剩"+t._s(t.product.count)+"件")])])])])],1)},v=[],h={props:{initialProduct:{type:Object,required:!0},category:{type:Object,required:!0}},data:function(){return{product:this.initialProduct,Category:this.category}}},m=h,f=(a("7460"),Object(d["a"])(m,y,v,!1,null,"5f44ee88",null)),C=f.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination mt-5"},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-item"},[a("router-link",{staticClass:"page-link",staticStyle:{color:"#0085a5"},attrs:{"aria-label":"Previous",to:{name:"category-products",query:{key:t.currentKey,value:t.currentValue,page:t.previousPage},hash:"#pagination"}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,(function(e){return a("li",{key:e,staticClass:"page-item",class:["page-item",{active:t.currentPage===e}]},[a("router-link",{staticClass:"page-link",attrs:{to:{name:"category-products",query:{key:t.currentKey,value:t.currentValue,page:e},hash:"#pagination"}}},[t._v(t._s(e))])],1)})),a("li",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-item"},[a("router-link",{staticClass:"page-link",staticStyle:{color:"#0085a5"},attrs:{to:{name:"category-products",query:{key:t.currentKey,value:t.currentValue,page:t.nextPage},hash:"#pagination"},"aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])},_=[],b=(a("c5f6"),{props:{currentKey:{type:String,default:""},currentValue:{type:String,default:""},currentPage:{type:Number,default:1},totalPage:{type:Number,default:-1}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage+1>this.totalPage?null:this.currentPage+1}}}),P=b,w=(a("1e1e"),Object(d["a"])(P,k,_,!1,null,"177cbfcc",null)),x=w.exports,S=a("962e"),q=a("2375"),K=a("9970"),V=a("2fa3"),j={components:{NavTabs:i["a"],Sort:p,Products:C,ProductsPagination:x,CartNotice:S["a"],Spinner:q["a"]},data:function(){return{categories:[],products:[],category:{id:-1,name:"",image:""},categoryId:-1,currentPage:1,totalPage:-1,currentKey:"",currentValue:"",isLoading:!0,show:!1}},created:function(){var t=this.$route.params.id,e=this.$route.query,a=e.key,r=e.value,s=e.page;this.fetchCategories({categoryId:t,key:a,value:r,page:s})},beforeRouteUpdate:function(t,e,a){var r=t.params.id,s=t.query,c=s.key,i=s.value,n=s.page;this.fetchCategories({categoryId:r,key:c,value:i,page:n}),a()},methods:{fetchCategories:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,r,s,c,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.categoryId,r=e.key,s=e.value,c=e.page,t.prev=1,this.show=!1,t.next=5,K["a"].getCategory({categoryId:a,key:r,value:s,page:c});case 5:if(i=t.sent,n=i.data,o=i.statusText,"OK"===o){t.next=10;break}throw new Error(o);case 10:this.categories=n.categories,this.products=n.products,this.category={id:n.category.id,name:n.category.name,image:n.category.image},this.categoryId=n.categoryId,this.currentKey=n.key,this.currentValue=n.value,this.currentPage=n.page,this.totalPage=n.totalPage.length,this.isLoading=!1,this.show=!0,t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](1),this.isLoading=!1,V["a"].fire({type:"error",title:"無法取得類別商品資料，請稍後再試"});case 26:case"end":return t.stop()}}),t,this,[[1,22]])})));function e(e){return t.apply(this,arguments)}return e}()}},N=j,A=(a("06c8"),Object(d["a"])(N,r,s,!1,null,"f366a160",null));e["default"]=A.exports},ee54:function(t,e,a){"use strict";var r=a("531a"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-c188483c.3c4e193d.js.map