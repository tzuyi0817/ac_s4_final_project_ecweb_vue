(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-564e84df"],{"9e23":function(e,t,r){},c32e:function(e,t,r){"use strict";var s=r("9e23"),a=r.n(s);a.a},fb5e:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mb-5"},[e.isLoading?r("Spinner"):[r("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("div",{staticClass:"edit-user-box row"},[r("div",{staticClass:"mug-shot col-lg-5"},[r("div",{staticClass:"form-group"},[e.user.image?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.user.image,alt:"img",width:"200",height:"200"}}):e._e(),r("input",{staticClass:"form-control-file",attrs:{type:"file",id:"image",name:"image",accept:"image/*"},on:{change:e.handleFileChange}})])]),r("div",{staticClass:"user-info-box col-lg-7"},[r("div",{staticClass:"form_group row"},[r("label",{staticClass:"col-2"},[e._v("名字:")]),r("div",{staticClass:"col-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})])]),r("div",{staticClass:"form-group row mt-4"},[r("label",{staticClass:"col-2"},[e._v("email:")]),r("div",{staticClass:"col-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})])]),r("div",{staticClass:"form-group row mt-4"},[r("label",{staticClass:"col-2"},[e._v("地址:")]),r("div",{staticClass:"col-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.address,expression:"user.address"}],staticClass:"form-control",attrs:{type:"address",name:"address",required:""},domProps:{value:e.user.address},on:{input:function(t){t.target.composing||e.$set(e.user,"address",t.target.value)}}})])])])]),r("div",{staticClass:"form-group d-flex justify-content-between mt-4 mb-5"},[r("button",{staticClass:"btn btn-success col-12",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(e._s(e.isProcessing?"處理中...":"儲存"))])])])]],2)},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("3b8d")),n=r("bd86"),o=r("4cce"),c=r("2375"),u=r("2fa3"),l=r("2f62");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={components:{Spinner:c["a"]},data:function(){return{user:{image:""},isLoading:!1,isProcessing:!1}},computed:m({},Object(l["b"])(["currentUser","isAuthenticated"])),beforeRouteUpdate:function(e,t,r){var s=e.params.id;this.fetchUser({userId:s}),r()},created:function(){var e=this.$route.params.id;this.fetchUser({userId:e})},methods:{fetchUser:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,e.prev=1,this.isLoading=!0,e.next=5,o["a"].getUserProfileEdit({userId:r});case 5:if(s=e.sent,a=s.data,i=s.statusText,"OK"===i){e.next=10;break}throw new Error(i);case 10:this.user=a.user,this.isLoading=!1,e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](1),this.isLoading=!1,u["a"].fire({type:"error",title:"無法取得使用者資料，請稍後再試"});case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}(),handleFileChange:function(e){var t=e.target.files;if(t.length){var r=window.URL.createObjectURL(t[0]);this.user.image=r}},handleSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,s,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.isProcessing=!0,r=t.target,s=new FormData(r),e.next=6,o["a"].postUserProfile({userId:this.user.id,formData:s});case 6:if(a=e.sent,i=a.data,n=a.statusText,"OK"===n&&"success"===i.status){e.next=11;break}throw new Error(n);case 11:this.$router.push({name:"UserProfile",params:{id:this.user.id}}),u["a"].fire({type:"success",title:"資料修改成功"}),this.isProcessing=!1,e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),this.isLoading=!1,u["a"].fire({type:"error",title:"無法修改資料，請稍後再試"});case 20:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}()}},f=p,g=(r("c32e"),r("2877")),v=Object(g["a"])(f,s,a,!1,null,"01bfcee6",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-564e84df.dcb238a2.js.map