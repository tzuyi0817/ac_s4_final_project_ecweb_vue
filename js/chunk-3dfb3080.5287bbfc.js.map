{"version":3,"sources":["webpack:///./src/components/OrdersDetails.vue?1cfd","webpack:///./src/apis/orders.js","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./src/views/UserProfile.vue?6550","webpack:///./src/components/OrdersDetails.vue?5661","webpack:///src/components/OrdersDetails.vue","webpack:///./src/components/OrdersDetails.vue?7df4","webpack:///./src/components/OrdersDetails.vue?52ca","webpack:///src/views/UserProfile.vue","webpack:///./src/views/UserProfile.vue?9311","webpack:///./src/views/UserProfile.vue?a24c","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./src/views/UserProfile.vue?dd93"],"names":["getOrder","apiHelper","get","postOrder","amount","UserId","StoreId","name","address","phone","shipmentType","paymentType","cartId","couponId","post","getOrderSuccess","orderId","getPayment","getBranchSelection","cancelOrder","fails","module","exports","method","arg","call","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","attrs","profile","image","_s","email","orders","length","id","currentUser","params","_e","_l","order","key","staticRenderFns","Order_status","orderStatus","cancel","on","$event","stopPropagation","preventDefault","handleCancelButtonClick","_m","item","Order_item","quantity","price","lastPayments","PaymentTypeId","PaymentStatusId","lastShipments","ShipmentTypeId","shipmentConvenienceStore","lastShipmentConvenienceStore","branch","ShipmentStatusId","inject","props","initialOrder","type","Object","required","data","payments","Payments","shipments","Shipments","ShipmentConvenienceStore","computed","slice","Store","methods","component","components","OrdersDetails","Spinner","isLoading","beforeRouteUpdate","fetchUser","next","created","$export","aFunction","toObject","$sort","sort","test","P","F","undefined","comparefn"],"mappings":"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","file":"js/chunk-3dfb3080.5287bbfc.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrdersDetails.vue?vue&type=style&index=0&id=15fe3ab2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrdersDetails.vue?vue&type=style&index=0&id=15fe3ab2&lang=scss&scoped=true&\"","import { apiHelper } from './../utils/helpers'\r\n\r\nexport default {\r\n  getOrder() {\r\n    return apiHelper.get(`/orderEdit`)\r\n  },\r\n  postOrder({\r\n    amount,\r\n    UserId,\r\n    StoreId,\r\n    name,\r\n    address,\r\n    phone,\r\n    shipmentType,\r\n    paymentType,\r\n    cartId,\r\n    couponId\r\n  }) {\r\n    return apiHelper.post(`/order`, {\r\n      amount,\r\n      UserId,\r\n      StoreId,\r\n      name,\r\n      address,\r\n      phone,\r\n      shipmentType,\r\n      paymentType,\r\n      cartId,\r\n      couponId\r\n    })\r\n  },\r\n  getOrderSuccess({ orderId }) {\r\n    return apiHelper.get(`/order/${orderId}/success`, { orderId })\r\n  },\r\n  getPayment({ orderId }) {\r\n    return apiHelper.get(`/order/${orderId}/payment`, { orderId })\r\n  },\r\n  getBranchSelection({ orderId }) {\r\n    return apiHelper.get(`/order/${orderId}/branchselection`, { orderId })\r\n  },\r\n  cancelOrder({ orderId }) {\r\n    return apiHelper.post(`/order/${orderId}`, { orderId })\r\n  }\r\n}","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.isLoading)?_c('Spinner'):[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"title col-lg-4\"},[_c('div',{staticClass:\"mb-4\"},[_c('h3',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"個人資料\")])]),_c('div',{staticClass:\"card mb-5\"},[_c('img',{staticClass:\"round\",attrs:{\"src\":_vm.profile.image,\"alt\":\"img\"}}),_c('h3',{staticClass:\"mt-4\"},[_vm._v(_vm._s(_vm.profile.name))]),_c('p',{staticClass:\"email mt-2\"},[_vm._v(_vm._s(_vm.profile.email))]),_c('p',[_vm._v(_vm._s(_vm.profile.address))]),_c('p',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.orders.length))]),_vm._v(\" 筆購物紀錄\\n          \")]),(_vm.profile.id === _vm.currentUser.id)?_c('router-link',{staticClass:\"btn btn-success mt-2 col-12\",attrs:{\"to\":{name: 'EditProfile', params: { id: _vm.profile.id }}}},[_vm._v(\"編輯個人資料\")]):_vm._e()],1)]),_c('div',{staticClass:\"col-lg-8\"},[_c('div',{staticClass:\"mb-4\"},[_c('h3',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"購物記錄\")])]),_vm._l((_vm.orders),function(order){return _c('OrdersDetails',{key:order.id,attrs:{\"initial-order\":order}})})],2)])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card mb-4\"},[_c('div',{staticClass:\"card-header\",staticStyle:{\"text-align\":\"center\",\"background-color\":\"#0085a5\",\"color\":\"white\"}},[_c('form',[(_vm.order.Order_status.orderStatus !== this.cancel)?_c('button',{staticClass:\"btn btn-danger float-right\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleCancelButtonClick(_vm.order.id)}}},[_vm._v(\"取消訂單\")]):_vm._e()]),_c('h4',[_vm._v(\"訂單資訊 - 編號(\"+_vm._s(_vm.order.id)+\")\")])]),_c('div',{staticClass:\"card-body\",staticStyle:{\"background-color\":\"#d2f0f5\"}},[_c('h6',{staticClass:\"ml-2\"},[_vm._v(\"商品詳情：\")]),_vm._m(0),_vm._l((_vm.order.items),function(item){return _c('li',{key:item.id,staticClass:\"bg-white text-dark list-group-item col-12\"},[_c('div',{staticClass:\"row\"},[_c('span',{staticClass:\"col-6\"},[_vm._v(_vm._s(item.name))]),_c('span',{staticClass:\"col-3\"},[_vm._v(_vm._s(item.Order_item.quantity))]),_c('span',{staticClass:\"col-3\"},[_vm._v(_vm._s(item.price))])])])}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"amount-box col-md-5\"},[_c('h6',{staticClass:\"mt-3 ml-2\"},[_vm._v(\"金額詳情：\")]),_c('div',{staticClass:\"bg-light text-dark list-group-item mt-3\"},[_c('span',[_vm._v(\"金額總計:\")]),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" \"+_vm._s(_vm.order.amount)+\" 元\")])])]),_c('div',{staticClass:\"customer-information col-md-7 mt-3\"},[_c('h6',{staticClass:\"ml-2\"},[_vm._v(\"收貨人資訊：\")]),_c('div',{staticClass:\"bg-light text-dark list-group-item mt-3\"},[_c('span',[_vm._v(\"名字:  \"+_vm._s(_vm.order.name))]),_c('br'),_c('span',[_vm._v(\"地址:  \"+_vm._s(_vm.order.address))]),_c('br'),_c('span',[_vm._v(\"電話:  \"+_vm._s(_vm.order.phone))])])])]),_c('h6',{staticClass:\"shipping-status ml-2 mt-3\"},[_vm._v(\"出貨狀況：\")]),_c('div',{staticClass:\"bg-light text-dark list-group-item mt-3 col-12\"},[_c('span',[_vm._v(\"訂單狀態:  \"+_vm._s(_vm.order.Order_status.orderStatus))]),_c('br'),(_vm.lastPayments.PaymentTypeId === 1)?_c('span',[_vm._v(\"付款方式:  信用卡\")]):_vm._e(),(_vm.lastPayments.PaymentTypeId === 2)?_c('span',[_vm._v(\"付款方式:  貨到付款\")]):_vm._e(),(_vm.lastPayments.PaymentTypeId === 3)?_c('span',[_vm._v(\"付款方式:  GOOGLEPAY\")]):_vm._e(),(_vm.lastPayments.PaymentTypeId === 4)?_c('span',[_vm._v(\"付款方式:  匯款\")]):_vm._e(),_c('br'),(_vm.lastPayments.PaymentStatusId === 1)?_c('span',[_vm._v(\"付款狀況:  未付款\")]):_vm._e(),(_vm.lastPayments.PaymentStatusId === 2)?_c('span',[_vm._v(\"付款狀況:  已付款\")]):_vm._e(),(_vm.lastPayments.PaymentStatusId === 3)?_c('span',[_vm._v(\"付款狀況:  退款中\")]):_vm._e(),(_vm.lastPayments.PaymentStatusId === 4)?_c('span',[_vm._v(\"付款狀況:  已退款\")]):_vm._e(),_c('br'),(_vm.lastShipments.ShipmentTypeId === 1)?_c('span',[_vm._v(\"出貨方式:  宅配\")]):_vm._e(),(_vm.lastShipments.ShipmentTypeId === 2)?_c('span',[_vm._v(\"出貨方式:  超商取貨\")]):_vm._e(),(_vm.lastShipments.ShipmentTypeId === 3)?_c('span',[_vm._v(\"出貨方式:  面交\")]):_vm._e(),(_vm.shipmentConvenienceStore.length > 0)?_c('span',[_vm._v(\" -『\"+_vm._s(_vm.lastShipmentConvenienceStore.branch)+\" - \"+_vm._s(_vm.lastShipmentConvenienceStore.address)+\"』\")]):_vm._e(),_c('br'),(_vm.lastShipments.ShipmentStatusId === 1)?_c('span',[_vm._v(\"出貨狀況:  備貨中\")]):_vm._e(),(_vm.lastShipments.ShipmentStatusId === 2)?_c('span',[_vm._v(\"出貨狀況:  發貨中\")]):_vm._e(),(_vm.lastShipments.ShipmentStatusId === 3)?_c('span',[_vm._v(\"出貨狀況:  已發貨\")]):_vm._e(),(_vm.lastShipments.ShipmentStatusId === 4)?_c('span',[_vm._v(\"出貨狀況:  已到達\")]):_vm._e(),(_vm.lastShipments.ShipmentStatusId === 5)?_c('span',[_vm._v(\"出貨狀況:  已取貨\")]):_vm._e(),(_vm.lastShipments.ShipmentStatusId === 6)?_c('span',[_vm._v(\"出貨狀況:  已退貨\")]):_vm._e(),(_vm.lastShipments.ShipmentStatusId === 7)?_c('span',[_vm._v(\"出貨狀況:  退貨中\")]):_vm._e()])],2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"bg-light text-dark list-group-item mt-3 col-12\"},[_c('div',{staticClass:\"row\"},[_c('span',{staticClass:\"col-6\"},[_vm._v(\"商品\")]),_c('span',{staticClass:\"col-3\"},[_vm._v(\"數量\")]),_c('span',{staticClass:\"col-3\"},[_vm._v(\"小計\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-header\" style=\"text-align: center; background-color: #0085a5; color: white;\">\r\n        <form>\r\n          <button\r\n            v-if=\"order.Order_status.orderStatus !== this.cancel\"\r\n            type=\"submit\"\r\n            class=\"btn btn-danger float-right\"\r\n            @click.stop.prevent=\"handleCancelButtonClick(order.id)\"\r\n          >取消訂單</button>\r\n        </form>\r\n        <h4>訂單資訊 - 編號({{order.id}})</h4>\r\n      </div>\r\n      <div class=\"card-body\" style=\"background-color: #d2f0f5;\">\r\n        <h6 class=\"ml-2\">商品詳情：</h6>\r\n        <li class=\"bg-light text-dark list-group-item mt-3 col-12\">\r\n          <div class=\"row\">\r\n            <span class=\"col-6\">商品</span>\r\n            <span class=\"col-3\">數量</span>\r\n            <span class=\"col-3\">小計</span>\r\n          </div>\r\n        </li>\r\n        <li\r\n          v-for=\"item in order.items\"\r\n          :key=\"item.id\"\r\n          class=\"bg-white text-dark list-group-item col-12\"\r\n        >\r\n          <div class=\"row\">\r\n            <span class=\"col-6\">{{item.name}}</span>\r\n            <span class=\"col-3\">{{item.Order_item.quantity}}</span>\r\n            <span class=\"col-3\">{{item.price}}</span>\r\n          </div>\r\n        </li>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"amount-box col-md-5\">\r\n            <h6 class=\"mt-3 ml-2\">金額詳情：</h6>\r\n            <div class=\"bg-light text-dark list-group-item mt-3\">\r\n              <span>金額總計:</span>\r\n              <span style=\"color: red;\">&nbsp;{{order.amount}} 元</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"customer-information col-md-7 mt-3\">\r\n            <h6 class=\"ml-2\">收貨人資訊：</h6>\r\n            <div class=\"bg-light text-dark list-group-item mt-3\">\r\n              <span>名字: &nbsp;{{order.name}}</span>\r\n              <br />\r\n              <span>地址: &nbsp;{{order.address}}</span>\r\n              <br />\r\n              <span>電話: &nbsp;{{order.phone}}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h6 class=\"shipping-status ml-2 mt-3\">出貨狀況：</h6>\r\n        <div class=\"bg-light text-dark list-group-item mt-3 col-12\">\r\n          <span>訂單狀態: &nbsp;{{order.Order_status.orderStatus}}</span>\r\n          <br />\r\n          <span v-if=\"lastPayments.PaymentTypeId === 1\">付款方式: &nbsp;信用卡</span>\r\n          <span v-if=\"lastPayments.PaymentTypeId === 2\">付款方式: &nbsp;貨到付款</span>\r\n          <span v-if=\"lastPayments.PaymentTypeId === 3\">付款方式: &nbsp;GOOGLEPAY</span>\r\n          <span v-if=\"lastPayments.PaymentTypeId === 4\">付款方式: &nbsp;匯款</span>\r\n          <br />\r\n          <span v-if=\"lastPayments.PaymentStatusId === 1\">付款狀況: &nbsp;未付款</span>\r\n          <span v-if=\"lastPayments.PaymentStatusId === 2\">付款狀況: &nbsp;已付款</span>\r\n          <span v-if=\"lastPayments.PaymentStatusId === 3\">付款狀況: &nbsp;退款中</span>\r\n          <span v-if=\"lastPayments.PaymentStatusId === 4\">付款狀況: &nbsp;已退款</span>\r\n          <br />\r\n          <span v-if=\"lastShipments.ShipmentTypeId === 1\">出貨方式: &nbsp;宅配</span>\r\n          <span v-if=\"lastShipments.ShipmentTypeId === 2\">出貨方式: &nbsp;超商取貨</span>\r\n          <span v-if=\"lastShipments.ShipmentTypeId === 3\">出貨方式: &nbsp;面交</span>\r\n          <span\r\n            v-if=\"shipmentConvenienceStore.length > 0\"\r\n          >&nbsp;-『{{lastShipmentConvenienceStore.branch}} - {{lastShipmentConvenienceStore.address}}』</span>\r\n          <br />\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 1\">出貨狀況: &nbsp;備貨中</span>\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 2\">出貨狀況: &nbsp;發貨中</span>\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 3\">出貨狀況: &nbsp;已發貨</span>\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 4\">出貨狀況: &nbsp;已到達</span>\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 5\">出貨狀況: &nbsp;已取貨</span>\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 6\">出貨狀況: &nbsp;已退貨</span>\r\n          <span v-if=\"lastShipments.ShipmentStatusId === 7\">出貨狀況: &nbsp;退貨中</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ordersAPI from \"./../apis/orders\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\nexport default {\r\n  inject: [\"reload\"],\r\n  props: {\r\n    initialOrder: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      order: this.initialOrder,\r\n      payments: this.initialOrder.Payments,\r\n      shipments: this.initialOrder.Shipments,\r\n      shipmentConvenienceStore: this.initialOrder.ShipmentConvenienceStore,\r\n      cancel: \"已取消\"\r\n    };\r\n  },\r\n  computed: {\r\n    lastPayments() {\r\n      const payments = this.payments.sort((a, b) => a.id - b.id); // eslint-disable-line\r\n      return payments.slice(-1)[0];\r\n    },\r\n    lastShipments() {\r\n      const shipments = this.shipments.sort((a, b) => a.id - b.id); // eslint-disable-line\r\n      return shipments.slice(-1)[0];\r\n    },\r\n    lastShipmentConvenienceStore() {\r\n      const Store = this.shipmentConvenienceStore.sort((a, b) => a.id - b.id); // eslint-disable-line\r\n      return Store.slice(-1)[0];\r\n    }\r\n  },\r\n  methods: {\r\n    async handleCancelButtonClick(orderId) {\r\n      try {\r\n        const { data, statusText } = await ordersAPI.cancelOrder({\r\n          orderId\r\n        });\r\n\r\n        if (statusText !== \"OK\" || data.status !== \"success\") {\r\n          throw new Error(statusText);\r\n        }\r\n\r\n        this.reload();\r\n\r\n        Toast.fire({\r\n          type: \"success\",\r\n          title: \"成功取消訂單\"\r\n        });\r\n      } catch (error) {\r\n        Toast.fire({\r\n          type: \"error\",\r\n          title: \"無法取消訂單，請稍後再試\"\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@mixin respond-and($upper) {\r\n  @media screen and (max-width: $upper) {\r\n    @content;\r\n  }\r\n}\r\n\r\n.card-header {\r\n  padding: 15px 10px;\r\n}\r\n\r\n.btn,\r\nspan {\r\n  font-size: 16px;\r\n}\r\n\r\nh6 {\r\n  color: #0085a5;\r\n}\r\n\r\n.list-group-item {\r\n  padding: 15px 10px;\r\n}\r\n\r\n.col,\r\n.col-6,\r\n.customer-information {\r\n  padding: 0;\r\n}\r\n\r\n.amount-box {\r\n  padding: 0 15px 0 0;\r\n  @include respond-and(768px) {\r\n    padding: 0;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrdersDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrdersDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrdersDetails.vue?vue&type=template&id=15fe3ab2&scoped=true&\"\nimport script from \"./OrdersDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./OrdersDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrdersDetails.vue?vue&type=style&index=0&id=15fe3ab2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15fe3ab2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <Spinner v-if=\"isLoading\" />\r\n    <template v-else>\r\n      <div class=\"row\">\r\n        <div class=\"title col-lg-4\">\r\n          <div class=\"mb-4\">\r\n            <h3 style=\"text-align:center\">個人資料</h3>\r\n          </div>\r\n\r\n          <div class=\"card mb-5\">\r\n            <img class=\"round\" :src=\"profile.image\" alt=\"img\" />\r\n            <h3 class=\"mt-4\">{{profile.name}}</h3>\r\n            <p class=\"email mt-2\">{{profile.email}}</p>\r\n            <p>{{profile.address}}</p>\r\n            <p>\r\n              <span style=\"color: red;\">{{orders.length}}</span> 筆購物紀錄\r\n            </p>\r\n            <router-link\r\n              v-if=\"profile.id === currentUser.id\"\r\n              :to=\"{name: 'EditProfile', params: { id: profile.id }}\"\r\n              class=\"btn btn-success mt-2 col-12\"\r\n            >編輯個人資料</router-link>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-lg-8\">\r\n          <div class=\"mb-4\">\r\n            <h3 style=\"text-align:center\">購物記錄</h3>\r\n          </div>\r\n          <!-- 訂單詳情 -->\r\n          <OrdersDetails v-for=\"order in orders\" :key=\"order.id\" :initial-order=\"order\" />\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport OrdersDetails from \"./../components/OrdersDetails\";\r\nimport userAPI from \"./../apis/users\";\r\nimport Spinner from \"./../components/Spinner\";\r\nimport { Toast } from \"./../utils/helpers\";\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    OrdersDetails,\r\n    Spinner\r\n  },\r\n  data() {\r\n    return {\r\n      profile: {},\r\n      orders: [],\r\n      isLoading: false\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"currentUser\", \"isAuthenticated\"])\r\n  },\r\n  // 使用 beforeRouteUpdate 方法取得使用者路由變化\r\n  beforeRouteUpdate(to, from, next) {\r\n    const { id: userId } = to.params;\r\n    this.fetchUser({ userId });\r\n    next();\r\n  },\r\n  created() {\r\n    const { id: userId } = this.$route.params;\r\n    this.fetchUser({ userId });\r\n  },\r\n  methods: {\r\n    async fetchUser({ userId }) {\r\n      try {\r\n        this.isLoading = true;\r\n\r\n        const { data, statusText } = await userAPI.getUserProfile({ userId });\r\n\r\n        if (statusText !== \"OK\") {\r\n          throw new Error(statusText);\r\n        }\r\n\r\n        this.profile = data.profile;\r\n        this.orders = data.orderInfo;\r\n\r\n        this.isLoading = false;\r\n      } catch (error) {\r\n        this.isLoading = false;\r\n        Toast.fire({\r\n          type: \"error\",\r\n          title: \"無法取得使用者資料，請稍後再試\"\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@mixin respond-and($upper) {\r\n  @media screen and (max-width: $upper) {\r\n    @content;\r\n  }\r\n}\r\n\r\n.card {\r\n  align-items: center;\r\n  background-color: #d2f0f5;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 10px 20px -10px rgba(0, 0, 0, 0.75);\r\n  color: #0085a5;\r\n  padding-top: 30px;\r\n  position: relative;\r\n  width: 350px;\r\n  max-width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.round {\r\n  border-radius: 50%;\r\n  padding: 7px;\r\n  width: 45%;\r\n  border-radius: 50%;\r\n  padding: 7px;\r\n  border: 1px solid #0085a5;\r\n}\r\n\r\n.email {\r\n  color: grey;\r\n  font-size: 16px;\r\n}\r\n\r\n.row,\r\n.btn {\r\n  font-size: 16px;\r\n}\r\n\r\n.title {\r\n  @include respond-and(992px) {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserProfile.vue?vue&type=template&id=d2677782&scoped=true&\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserProfile.vue?vue&type=style&index=0&id=d2677782&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d2677782\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=style&index=0&id=d2677782&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=style&index=0&id=d2677782&lang=scss&scoped=true&\""],"sourceRoot":""}